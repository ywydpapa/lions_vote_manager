<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>방명록 A4</title>
    <style>
        /* ---- Print setup ---- */
        @page {
            size: A4;
            margin: 12mm;
        }

        @media print {
            .no-print {
                display: none !important;
            }
        }

        /* ---- Page ---- */
        :root {
            --ink: #111827;
            --muted: #6b7280;
            --line: #d1d5db;
            --soft: #f3f4f6;
        }

        html, body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
            color: var(--ink);
            background: #fff;
        }

        .page {
            box-sizing: border-box;
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            padding: 0;
        }

        .sheet {
            height: calc(297mm - 24mm);
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 10mm;
        }

        /* ---- Header photo ---- */
        .photo {
            border: 1px solid var(--line);
            border-radius: 10px;
            overflow: hidden;
            height: 90mm; /* 상단 사진 영역 높이 */
            background: var(--soft);
        }

        .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 사진이 꽉 차게 */
            display: block;
        }

        /* ---- Title ---- */
        .title {
            text-align: center;
            padding: 2mm 2mm 0;
        }

        .title h1 {
            margin: 0;
            font-size: 18pt;
            letter-spacing: 0.2px;
            font-weight: 800;
        }

        .subtitle {
            margin-top: 2mm;
            font-size: 10.5pt;
            color: var(--muted);
        }

        /* ---- Info row ---- */
        .meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6mm;
            margin-top: 2mm;
        }

        .field {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 4mm 5mm;
            display: grid;
            grid-template-columns: 28mm 1fr;
            align-items: center;
            min-height: 14mm;
        }

        .label {
            font-size: 10.5pt;
            color: var(--muted);
            font-weight: 700;
        }

        .value {
            border-bottom: 1px solid var(--line);
            height: 8mm;
        }

        /* ---- Main message ---- */
        .content {
            border: 1px solid var(--line);
            border-radius: 12px;
            padding: 6mm;
            flex: 1;
            display: grid;
            grid-template-rows: auto 1fr auto;
            gap: 4mm;
        }

        .content h2 {
            margin: 0;
            font-size: 12.5pt;
            letter-spacing: 0.1px;
        }

        .lines {
            border-radius: 10px;
            background: linear-gradient(#fff, #fff) padding-box,
            repeating-linear-gradient(
                    to bottom,
                    transparent 0,
                    transparent 9mm,
                    rgba(17, 24, 39, 0.12) 9mm,
                    rgba(17, 24, 39, 0.12) 9.2mm
            ) border-box;
            border: 1px solid rgba(17, 24, 39, 0.08);
            height: 100%;
            padding: 4mm;
        }

        .hint {
            font-size: 10pt;
            color: var(--muted);
            margin: 0;
        }

        /* ---- Footer ---- */
        .footer {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6mm;
            align-items: end;
        }

        .sign {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 4mm 5mm;
            min-height: 18mm;
            display: grid;
            grid-template-columns: 28mm 1fr;
            gap: 4mm;
            align-items: center;
        }

        .sign .value {
            height: 10mm;
        }

        .stamp {
            border: 1px dashed var(--line);
            border-radius: 10px;
            min-height: 18mm;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted);
            font-size: 10pt;
        }

        /* ---- Top utility ---- */
        .toolbar {
            width: 210mm;
            margin: 10px auto;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .btn {
            border: 1px solid var(--line);
            background: #fff;
            border-radius: 10px;
            padding: 8px 12px;
            font-weight: 700;
            cursor: pointer;
        }

        .btn:active {
            transform: translateY(1px);
        }
    </style>
</head>
<body>
<div class="toolbar no-print">
    <button class="btn" onclick="window.print()">인쇄하기</button>
</div>
<main class="page">
    <section class="sheet">
        <!-- 상단 사진 1장: src만 원하는 이미지로 교체하세요 -->
        <div class="photo">
            <img src="{{ photo_url }}" alt="방문기념 사진"/>
        </div>
        <header class="title">
            <h1>지구제2부총재 후보 전희충L 선거사무실 방문기념</h1>
            <div class="subtitle">방문해 주셔서 감사합니다.</div>
            <div class="meta">
                <div class="field">
                    <div class="label">방문일시</div>
                    <div class="value" style="border-bottom:0; height:auto;">
                        {% if reserv and reserv.reservFrom %}
                        {{ reserv.reservFrom.strftime('%Y-%m-%d %H:%M') }}
                        {% else %}
                        -
                        {% endif %}
                    </div>
                </div>

                <div class="field">
                    <div class="label">방문처</div>
                    <div class="value" style="border-bottom:0; height:auto;">
                        {% if reserv and reserv.visitorName %}
                        {{ reserv.visitorName }}
                        {% else %}
                        -
                        {% endif %}
                    </div>
                </div>
            </div>
        </header>
        <section class="content">
            <h2>후보에게 응원메세지</h2>
            <div class="lines" aria-label="메시지 작성 영역"></div>
        </section>
        <footer class="footer">
        </footer>
    </section>
</main>
</body>
</html>